<h1><%= @user.username %></h1>

<% if session[:user_id] == @user.id %>
    <h1>Hello<h1>
    <% end %>

<h3>Communities:</h3>
<ul>
    <% @user.communities.each do |community|%>
        <% if community.public %>
                <li><%= link_to community.title, community_path(community) %></li>
            <% end %>
    <% end %>
</ul>

<h3>Game History:</h3>

<% #games = [] %>

<% if false %>
    <% @user.communities.each do |community|%>
        <% if community.public %>
                <% games << community.game %>
            <% end %>
    <% end %>
<% end %>

<ul>
    <% game_array = @user.sessions.map do |session|%>
        <% #if session.public %>
            <% session.game %>
        <% #end %>
    <% end %>

    <% game_array.uniq.each do |game| %>
        <li><%= link_to game.title, game_path(game) %> - played <%= game_array.count(game) %> times</li>
    <% end %>

</ul>